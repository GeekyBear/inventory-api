{
    "info": {
        "_postman_id": "inventory-api-complete",
        "name": "Inventory API - Complete Collection",
        "description": "Complete API collection for Inventory Management System with JWT Authentication, Categories, Products, Search, and Workflow Tests",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{access_token}}",
                "type": "string"
            }
        ]
    },
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Auto-refresh token if expired",
                    "if (pm.collectionVariables.get('access_token') && pm.collectionVariables.get('refresh_token')) {",
                    "    const currentTime = Math.floor(Date.now() / 1000);",
                    "    const tokenExpiry = pm.collectionVariables.get('token_expiry') || 0;",
                    "    ",
                    "    if (currentTime >= tokenExpiry - 60) {",
                    "        console.log('Token expired, refreshing...');",
                    "        const refreshToken = pm.collectionVariables.get('refresh_token');",
                    "        ",
                    "        pm.sendRequest({",
                    "            url: pm.collectionVariables.get('base_url') + '/auth/refresh',",
                    "            method: 'POST',",
                    "            header: { 'Content-Type': 'application/json' },",
                    "            body: { mode: 'raw', raw: JSON.stringify({ refreshToken: refreshToken }) }",
                    "        }, function (err, response) {",
                    "            if (!err && response.code === 200) {",
                    "                const responseJson = response.json();",
                    "                pm.collectionVariables.set('access_token', responseJson.accessToken);",
                    "                pm.collectionVariables.set('refresh_token', responseJson.refreshToken);",
                    "                pm.collectionVariables.set('token_expiry', Math.floor(Date.now() / 1000) + 900);",
                    "                console.log('Token refreshed successfully');",
                    "            }",
                    "        });",
                    "    }",
                    "}"
                ]
            }
        }
    ],
    "item": [
        {
            "name": "Authentication",
            "description": "JWT Authentication endpoints - Register, Login, Refresh, Profile, Logout",
            "item": [
                {
                    "name": "Register User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Response has access token and user', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('accessToken');",
                                    "    pm.expect(responseJson).to.have.property('refreshToken');",
                                    "    pm.expect(responseJson).to.have.property('user');",
                                    "    pm.expect(responseJson.user).to.have.property('role');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('access_token', responseJson.accessToken);",
                                    "    pm.collectionVariables.set('refresh_token', responseJson.refreshToken);",
                                    "    pm.collectionVariables.set('token_expiry', Math.floor(Date.now() / 1000) + 900);",
                                    "    pm.collectionVariables.set('user_id', responseJson.user.id);",
                                    "    console.log('üéâ User registered successfully - Tokens saved');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": { "type": "noauth" },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/register",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "register"]
                        }
                    }
                },
                {
                    "name": "Login User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has access token and user', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('accessToken');",
                                    "    pm.expect(responseJson).to.have.property('refreshToken');",
                                    "    pm.expect(responseJson).to.have.property('user');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('access_token', responseJson.accessToken);",
                                    "    pm.collectionVariables.set('refresh_token', responseJson.refreshToken);",
                                    "    pm.collectionVariables.set('token_expiry', Math.floor(Date.now() / 1000) + 900);",
                                    "    pm.collectionVariables.set('user_id', responseJson.user.id);",
                                    "    console.log('‚úÖ User logged in successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": { "type": "noauth" },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "login"]
                        }
                    }
                },
                {
                    "name": "Refresh Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has new tokens', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('accessToken');",
                                    "    pm.expect(responseJson).to.have.property('refreshToken');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('access_token', responseJson.accessToken);",
                                    "    pm.collectionVariables.set('refresh_token', responseJson.refreshToken);",
                                    "    pm.collectionVariables.set('token_expiry', Math.floor(Date.now() / 1000) + 900);",
                                    "    console.log('üîÑ Tokens refreshed successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": { "type": "noauth" },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/refresh",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "refresh"]
                        }
                    }
                },
                {
                    "name": "Get Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has user profile', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('user');",
                                    "    pm.expect(responseJson.user).to.have.property('id');",
                                    "    pm.expect(responseJson.user).to.have.property('email');",
                                    "    pm.expect(responseJson.user).to.have.property('role');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/auth/profile",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "profile"]
                        }
                    }
                },
                {
                    "name": "Logout",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.collectionVariables.unset('access_token');",
                                    "    pm.collectionVariables.unset('refresh_token');",
                                    "    pm.collectionVariables.unset('token_expiry');",
                                    "    pm.collectionVariables.unset('user_id');",
                                    "    console.log('üëã User logged out - Tokens cleared');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/auth/logout",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "logout"]
                        }
                    }
                }
            ]
        },
        {
            "name": "Categories Management",
            "description": "CRUD operations for inventory categories",
            "item": [
                {
                    "name": "Create Category",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Response has created category', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('category');",
                                    "    pm.expect(responseJson.category).to.have.property('id');",
                                    "    pm.expect(responseJson.category).to.have.property('name');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('category_id', responseJson.category.id);",
                                    "    console.log('üìÅ Category created: ' + responseJson.category.name);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Electronic devices and components\",\n  \"icon\": \"üîå\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["categories"]
                        }
                    }
                },
                {
                    "name": "Get All Categories",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has categories array', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('categories');",
                                    "    pm.expect(responseJson.categories).to.be.an('array');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["categories"]
                        }
                    }
                },
                {
                    "name": "Get Category by ID",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has category details', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('category');",
                                    "    pm.expect(responseJson.category).to.have.property('id');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/categories/{{category_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["categories", "{{category_id}}"]
                        }
                    }
                },
                {
                    "name": "Update Category",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has updated category', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('category');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "PATCH",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Electronics & Gadgets\",\n  \"description\": \"Electronic devices, gadgets, and components\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/categories/{{category_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["categories", "{{category_id}}"]
                        }
                    }
                },
                {
                    "name": "Search Categories",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has search results', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('categories');",
                                    "    pm.expect(responseJson).to.have.property('total');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/categories?name=electronics&page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["categories"],
                            "query": [
                                { "key": "name", "value": "electronics" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" }
                            ]
                        }
                    }
                },
                {
                    "name": "Delete Category",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response confirms deletion', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('message');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/categories/{{category_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["categories", "{{category_id}}"]
                        }
                    }
                }
            ]
        },
        {
            "name": "Products Management",
            "description": "CRUD operations for product inventory",
            "item": [
                {
                    "name": "Create Product",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Response has created product', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('product');",
                                    "    pm.expect(responseJson.product).to.have.property('id');",
                                    "    pm.expect(responseJson.product).to.have.property('sku');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('product_id', responseJson.product.id);",
                                    "    console.log('üì¶ Product created: ' + responseJson.product.name);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"iPhone 15 Pro\",\n  \"description\": \"Latest iPhone with A17 Pro chip and advanced camera system\",\n  \"sku\": \"IPH15PRO128\",\n  \"price\": 999.99,\n  \"quantity\": 50,\n  \"lowStockThreshold\": 10,\n  \"categoryId\": \"{{category_id}}\",\n  \"brand\": \"Apple\",\n  \"tags\": [\"smartphone\", \"apple\", \"5g\", \"premium\"],\n  \"specifications\": {\n    \"CPU\": \"A17 Pro\",\n    \"Storage\": \"128GB\",\n    \"Display\": \"6.1-inch Super Retina XDR\",\n    \"Camera\": \"48MP Main + 12MP Ultra Wide + 12MP Telephoto\"\n  },\n  \"isActive\": true,\n  \"isFeatured\": true\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": ["{{base_url}}"],
                            "path": ["products"]
                        }
                    }
                },
                {
                    "name": "Get All Products",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has products array', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('products');",
                                    "    pm.expect(responseJson.products).to.be.an('array');",
                                    "    pm.expect(responseJson).to.have.property('total');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products?page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["products"],
                            "query": [
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Product by ID",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has product details', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('product');",
                                    "    pm.expect(responseJson.product).to.have.property('id');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/{{product_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["products", "{{product_id}}"]
                        }
                    }
                },
                {
                    "name": "Update Product",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has updated product', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('product');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "PATCH",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"price\": 899.99,\n  \"quantity\": 75,\n  \"description\": \"Latest iPhone 15 Pro with A17 Pro chip and advanced camera system - Now with reduced price!\",\n  \"isFeatured\": true\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products/{{product_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["products", "{{product_id}}"]
                        }
                    }
                },
                {
                    "name": "Delete Product",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response confirms deletion', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('message');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/{{product_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["products", "{{product_id}}"]
                        }
                    }
                }
            ]
        },
        {
            "name": "Search & Filters",
            "description": "Advanced search functionality with filters and sorting",
            "item": [
                {
                    "name": "Search Products",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has search results', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('products');",
                                    "    pm.expect(responseJson).to.have.property('total');",
                                    "    pm.expect(responseJson).to.have.property('page');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?q=iPhone&page=1&limit=10&sortBy=price&sortOrder=desc",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "q", "value": "iPhone" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" },
                                { "key": "sortBy", "value": "price" },
                                { "key": "sortOrder", "value": "desc" }
                            ]
                        }
                    }
                },
                {
                    "name": "Filter by Category",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response has filtered products', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('products');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?categoryId={{category_id}}&page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "categoryId", "value": "{{category_id}}" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" }
                            ]
                        }
                    }
                },
                {
                    "name": "Filter by Price Range",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Products are within price range', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    if (responseJson.products && responseJson.products.length > 0) {",
                                    "        responseJson.products.forEach(product => {",
                                    "            pm.expect(product.price).to.be.at.least(500);",
                                    "            pm.expect(product.price).to.be.at.most(1500);",
                                    "        });",
                                    "    }",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?minPrice=500&maxPrice=1500&page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "minPrice", "value": "500" },
                                { "key": "maxPrice", "value": "1500" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" }
                            ]
                        }
                    }
                },
                {
                    "name": "Filter by Active Products",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Products match active status', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    if (responseJson.products && responseJson.products.length > 0) {",
                                    "        responseJson.products.forEach(product => {",
                                    "            pm.expect(product.isActive).to.equal(true);",
                                    "        });",
                                    "    }",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?isActive=true&page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "isActive", "value": "true" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "10" }
                            ]
                        }
                    }
                },
                {
                    "name": "Advanced Combined Search",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Advanced search returns results', function () {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('products');",
                                    "    pm.expect(responseJson).to.have.property('total');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?q=phone&categoryId={{category_id}}&minPrice=300&maxPrice=2000&isActive=true&tags=smartphone&brand=Apple&sortBy=price&sortOrder=asc&page=1&limit=5",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "q", "value": "phone" },
                                { "key": "categoryId", "value": "{{category_id}}" },
                                { "key": "minPrice", "value": "300" },
                                { "key": "maxPrice", "value": "2000" },
                                { "key": "isActive", "value": "true" },
                                { "key": "tags", "value": "smartphone" },
                                { "key": "brand", "value": "Apple" },
                                { "key": "sortBy", "value": "price" },
                                { "key": "sortOrder", "value": "asc" },
                                { "key": "page", "value": "1" },
                                { "key": "limit", "value": "5" }
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Complete Workflow Tests",
            "description": "End-to-end testing scenarios simulating real-world usage",
            "item": [
                {
                    "name": "01 - User Registration & Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('User workflow - Registration successful', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('accessToken');",
                                    "    pm.expect(responseJson).to.have.property('user');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('workflow_access_token', responseJson.accessToken);",
                                    "    pm.collectionVariables.set('workflow_refresh_token', responseJson.refreshToken);",
                                    "    pm.collectionVariables.set('workflow_user_id', responseJson.user.id);",
                                    "    console.log('üéâ Workflow user registered successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": { "type": "noauth" },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Workflow Test User\",\n  \"email\": \"workflow@test.com\",\n  \"password\": \"WorkflowTest123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/register",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "register"]
                        }
                    }
                },
                {
                    "name": "02 - Create Test Category",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - Category creation successful', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson.category).to.have.property('name', 'Workflow Electronics');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('workflow_category_id', responseJson.category.id);",
                                    "    console.log('üìÅ Workflow category created');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Workflow Electronics\",\n  \"description\": \"Electronics category for workflow testing\",\n  \"icon\": \"‚ö°\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["categories"]
                        }
                    }
                },
                {
                    "name": "03 - Create Test Product",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - Product creation successful', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson.product).to.have.property('name');",
                                    "    pm.expect(responseJson.product).to.have.property('sku');",
                                    "});",
                                    "",
                                    "if (pm.response.code === 201) {",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.collectionVariables.set('workflow_product_id', responseJson.product.id);",
                                    "    console.log('üì¶ Workflow product created: ' + responseJson.product.name);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Workflow Laptop Pro\",\n  \"description\": \"High-performance laptop for workflow testing with amazing features\",\n  \"sku\": \"WF-LAPTOP-001\",\n  \"price\": 1299.99,\n  \"quantity\": 25,\n  \"lowStockThreshold\": 5,\n  \"categoryId\": \"{{workflow_category_id}}\",\n  \"brand\": \"WorkflowTech\",\n  \"tags\": [\"laptop\", \"professional\", \"workflow\"],\n  \"specifications\": {\n    \"CPU\": \"Intel i7\",\n    \"RAM\": \"16GB\",\n    \"Storage\": \"512GB SSD\",\n    \"Display\": \"15.6-inch FHD\"\n  },\n  \"isActive\": true,\n  \"isFeatured\": false\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": ["{{base_url}}"],
                            "path": ["products"]
                        }
                    }
                },
                {
                    "name": "04 - Test Search Functionality",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - Search functionality working', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson).to.have.property('products');",
                                    "    pm.expect(responseJson).to.have.property('total');",
                                    "});",
                                    "",
                                    "console.log('üîç Search functionality verified successfully');"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products/search?q=workflow&categoryId={{workflow_category_id}}&isActive=true",
                            "host": ["{{base_url}}"],
                            "path": ["products", "search"],
                            "query": [
                                { "key": "q", "value": "workflow" },
                                { "key": "categoryId", "value": "{{workflow_category_id}}" },
                                { "key": "isActive", "value": "true" }
                            ]
                        }
                    }
                },
                {
                    "name": "05 - Update Product Inventory",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - Product update successful', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson.product).to.have.property('quantity', 45);",
                                    "});",
                                    "",
                                    "console.log('üìä Inventory update verified successfully');"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "PATCH",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"quantity\": 45,\n  \"price\": 1199.99,\n  \"description\": \"High-performance laptop for workflow testing with amazing features - Updated!\",\n  \"lowStockThreshold\": 3\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products/{{workflow_product_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["products", "{{workflow_product_id}}"]
                        }
                    }
                },
                {
                    "name": "06 - Verify User Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - User session active', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const responseJson = pm.response.json();",
                                    "    pm.expect(responseJson.user).to.have.property('email', 'workflow@test.com');",
                                    "});",
                                    "",
                                    "console.log('üë§ User session verified successfully');"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/auth/profile",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "profile"]
                        }
                    }
                },
                {
                    "name": "07 - Cleanup & Logout",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Workflow - Logout successful', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.collectionVariables.unset('workflow_access_token');",
                                    "    pm.collectionVariables.unset('workflow_refresh_token');",
                                    "    pm.collectionVariables.unset('workflow_user_id');",
                                    "    pm.collectionVariables.unset('workflow_category_id');",
                                    "    pm.collectionVariables.unset('workflow_product_id');",
                                    "    console.log('üéØ Complete workflow test finished successfully!');",
                                    "    console.log('‚úÖ All functionality verified: Auth, Categories, Products, Search, Updates');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [{ "key": "token", "value": "{{workflow_access_token}}", "type": "string" }]
                        },
                        "method": "POST",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/auth/logout",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "logout"]
                        }
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:3000",
            "type": "string",
            "description": "Base URL for the Inventory API"
        },
        {
            "key": "access_token",
            "value": "",
            "type": "string",
            "description": "JWT access token for authentication"
        },
        {
            "key": "refresh_token",
            "value": "",
            "type": "string",
            "description": "JWT refresh token for token renewal"
        },
        {
            "key": "token_expiry",
            "value": "",
            "type": "string",
            "description": "Token expiry timestamp"
        },
        {
            "key": "user_id",
            "value": "",
            "type": "string",
            "description": "Current user ID"
        },
        {
            "key": "category_id",
            "value": "",
            "type": "string",
            "description": "ID of the test category"
        },
        {
            "key": "product_id",
            "value": "",
            "type": "string",
            "description": "ID of the test product"
        },
        {
            "key": "workflow_access_token",
            "value": "",
            "type": "string",
            "description": "Access token for workflow tests"
        },
        {
            "key": "workflow_refresh_token",
            "value": "",
            "type": "string",
            "description": "Refresh token for workflow tests"
        },
        {
            "key": "workflow_user_id",
            "value": "",
            "type": "string",
            "description": "User ID for workflow tests"
        },
        {
            "key": "workflow_category_id",
            "value": "",
            "type": "string",
            "description": "Category ID for workflow tests"
        },
        {
            "key": "workflow_product_id",
            "value": "",
            "type": "string",
            "description": "Product ID for workflow tests"
        }
    ]
}
